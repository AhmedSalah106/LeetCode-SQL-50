--USING DENSE_RANK FUNCTINO
IF (SELECT COUNT(SALARY) FROM (SELECT DISTINCT SALARY FROM EMPLOYEE) AS DIS) <= 1
    SELECT null AS SecondHighestSalary
ELSE 
BEGIN
    WITH RANKING_WINDOW AS
    (
        SELECT * , DENSE_RANK() OVER (ORDER BY SALARY DESC) AS RN
        FROM EMPLOYEE
        
    )
    SELECT TOP 1 SALARY AS SecondHighestSalary
    FROM RANKING_WINDOW
    WHERE RN = 2
END


--USING LAG FUNCTION 

DECLARE @ANS INT 
SELECT  @ANS=LAG(EMP.SALARY) OVER (ORDER BY EMP.SALARY ASC)
FROM (SELECT DISTINCT SALARY FROM EMPLOYEE) AS EMP
SELECT @ANS AS SecondHighestSalary




--USING SUBQUERY   #Not Recommended

DECLARE @ANS INT
SET @ANS = NULL
SELECT TOP 1 @ANS = SALARY  
FROM EMPLOYEE
WHERE SALARY < (SELECT MAX(SALARY) FROM EMPLOYEE)
ORDER BY SALARY DESC
SELECT @ANS AS SecondHighestSalary